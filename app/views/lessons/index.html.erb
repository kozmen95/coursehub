<h2 class="text-xl font-bold mb-4">Lekcje kursu: <%= @course.title %></h2>

<% if @lessons.any? %>
  <div class="space-y-2">
    <% @lessons.each do |l| %>
      <div class="p-3 rounded border">
        <div class="font-medium">
          <%= l.starts_at&.strftime("%Y-%m-%d %H:%M") %> → <%= l.ends_at&.strftime("%Y-%m-%d %H:%M") %>
        </div>
        <div class="text-slate-600">Miejsce: <%= l.location.presence || "—" %></div>
        <div class="mt-2">
          <%= link_to "Podgląd", [@course, l], class: "text-indigo-600 hover:underline" %>
          <% if current_user == @course.instructor || current_user.admin? %>
            · <%= link_to "Edytuj", edit_course_lesson_path(@course, l), class: "text-indigo-600 hover:underline" %>
            · <%= link_to "Usuń", course_lesson_path(@course, l), data: { turbo_method: :delete, turbo_confirm: "Na pewno?" }, class: "text-red-600 hover:underline" %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <p class="text-slate-600">Brak lekcji.</p>
<% end %>

<% if current_user == @course.instructor || current_user.admin? %>
  <div class="mt-4">
    <%= link_to "Dodaj lekcję", new_course_lesson_path(@course), class: "px-4 py-2 rounded bg-indigo-600 text-white" %>
  </div>
<% end %>
